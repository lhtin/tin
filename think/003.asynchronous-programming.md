# Promise与异步编程

本文目录：

1. 何为异步编程；
2. 为什么需要异步编程；
3. 何为Promise；
4. Promise有哪些优点？

## 何为异步编程

异步编程，是指在单线程中，为了避免阻塞而使用的一种编程模型。介绍异步编程前，先介绍单线程同步编程。

本来，程序的执行，是按照代码所写的逻辑一步步执行下去的，不存在什么同步异步之分。然而，具体到实际中发现这样会导致代码被阻塞，浪费CPU资源。

比如读取文件操作（假如读取文件是由文件读取器来真正读取的），当我们向文件读取器申请读取文件时，我们会因为等待结果而阻塞程序的执行，导致这段时间用于执行我们的程序的CPU资源空闲。为了高效的利用CPU，我们可能先是把xxx文件名给文件读取器，并要求它读完之后通知我们。在我们把文件名给文件读取器后，我们不等待结果的返回，而是继续向下执行其它操作，直到文件读取器通知文件读取完毕时才继续文件处理的操作。伪代码如下：

```js
// 同步：
readFile
doSomethingWidthFile
doOtherThings

// 异步：
readFile(doSomethingWidthFile)
doOtherThings
```

## 为什么需要异步编程

正如“何为异步编程”小节中所说的。为了有效的利用异步编程，在执行一个由外部服务者提供的耗时操作时，我们不去等待结果的返回，而是让服务提供者通知我们。中间这段时间可以去做其它事情。

## 何为Promise

那么，Promise又是什么呢？简单说，一个Promise指某个操作的封装，维持了这个操作的状态（执行中，执行成功，执行失败）。并且Promise的状态要么从执行中转向执行成功，要么从执行中转向执行失败，一旦改变了状态，之后将一直不变。对于使用者来说，我们使用Promise提供的then接口注册执行成功的回调和执行失败的回调。当Promise状态发生转变时，会执行相应的回调，之后再注册的回调也就会马上执行。

## Promise有哪些优点

优点1：使异步编程变得直观
优点2：提前执行异步操作，之后很容易使用异步操作的结果
优点3：通过简单的封装，可以做出串行、并行控制函数
